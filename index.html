<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Riesgo en el trading</title>
    <link rel="stylesheet" type="text/css" href="estilos.css">
</head>

<body>
    <h1>Calculadora de Trading</h1>
    <div class="container">
        <form class="formularioOnlyRead">
            <label for="capitalTotal">Total con apalancamiento:</label>
            <input type="number" id="capitalTotal" name="capitalTotal" readonly>
            <br>
            <label for="numOperaciones">Número de operaciones necesarias para ser liquidado:</label>
            <input type="number" id="numOperaciones" name="numOperaciones" readonly>
            <br>
            <label for="perdidaMaxima">Pérdida máxima en $ por operación:</label>
            <input type="number" id="perdidaMaxima" name="perdidaMaxima" readonly>
            <br>
            <label for="tamanoMaximo">Tamaño máximo de orden:</label>
            <br>
            <input type="number" id="tamanoMaximo" name="tamanoMaximo" readonly>
        </form>
        <form class="formulario">
            <label for="apalancamiento">Nivel de apalancamiento:</label>
            <input type="number" id="apalancamiento" name="apalancamiento" value="20">
            <br>
            <label for="porcentajeStopLoss">% del stop loss:</label>
            <input type="number" id="porcentajeStopLoss" name="porcentajeStopLoss">
            <label for="capitalReal">Capital real de la cuenta:</label>
            <input type="number" id="capitalReal" name="capitalReal">
            <label for="porcentajeCuenta">% de la cuenta que se usa:</label>
            <input type="number" id="porcentajeCuenta" name="porcentajeCuenta">
            <br>
            <button type="reset" onclick="limpiarFormularios()">Limpiar</button>
            <button type="button" onclick="calcular()" class="boton-glow">Calcular</button>
        </form>
    </div>
    <script type="text/javascript">
    function limpiarFormularios() {
        document.querySelector('.formularioOnlyRead').reset();
        document.querySelector('.formulario').reset();
    }

    function calcular() {
        // Obtenemos los valores introducidos por el usuario
        const porcentajeStopLoss = Number(document.getElementById("porcentajeStopLoss").value);
        const porcentajeCuenta = Number(document.getElementById("porcentajeCuenta").value);
        const capitalReal = Number(document.getElementById("capitalReal").value);
        const apalancamiento = Number(document.getElementById("apalancamiento").value);

        // Calculamos los valores necesarios
        const capitalTotal = capitalReal * apalancamiento;
        const perdidaMaxima = capitalTotal * (porcentajeStopLoss / 100) * (porcentajeCuenta / 100);
        const tamanoMaximo = capitalTotal * (porcentajeCuenta / 100);
        const numOperaciones = capitalReal / perdidaMaxima;

        // Actualizamos los campos correspondientes en la página
        document.getElementById("numOperaciones").value = numOperaciones.toFixed(2);
        document.getElementById("perdidaMaxima").value = perdidaMaxima.toFixed(2);
        document.getElementById("tamanoMaximo").value = tamanoMaximo.toFixed(2);
        document.getElementById("capitalTotal").value = capitalTotal.toFixed(2);
    }
    </script>
</body>

</html>
